<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>To-Do App</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <h1>Ma To-Do List</h1>
    <form action="/add" method="POST" class="mb-3">
    	<div class="input-group">
        	<input type="text" name="title" class="form-control" placeholder="Nouvelle tâche" required>
        	<select name="category" class="form-select">
            		<option value="">Aucune catégorie</option>
            		<option value="Travail">Travail</option>
            		<option value="Perso">Perso</option>
            		<option value="Autre">Autre</option>
        	</select>
        	<select name="priority" class="form-select">
            		<option value="Low">Low</option>
            		<option value="Medium" selected>Medium</option>
            		<option value="High">High</option>
        	</select>
        	<button type="submit" class="btn btn-primary">Ajouter</button>
    	</div>
    </form>
    <ul class="list-group">
        {% for task in tasks %}
            <li class="list-group-item {% if task.completed %}completed{% endif %}">
               <div>
            	  <strong>{{ task.title }}</strong>
            	  {% if task.category %}<span class="badge bg-info text-dark">{{ task.category }}</span>{% endif %}
            	  <span class="badge 
                 	{% if task.priority == 'High' %}bg-danger
                 	{% elif task.priority == 'Medium' %}bg-warning text-dark
                 	{% else %}bg-secondary{% endif %}">
                	{{ task.priority }}
            	  </span>
               </div>
               <div>
            		<a href="/toggle/{{ task.id }}" class="btn btn-sm">✔️</a>
            		<a href="/delete/{{ task.id }}" class="btn btn-sm">❌</a>
        	</div>
            </li>
        {% endfor %}
    </ul>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
